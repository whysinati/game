var game=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),i={x:0,y:475,h:25,w:25,fill:"#fff",dir:"right",speed:5},l={x:775,y:475,h:25,w:25,fill:"pink",dir:"left",speed:5},r={x:50,y:0,h:10,w:10,fill:"#ff0",speed:5},n={},a=null,c=null,d=!1,h=0;function o(){t.fillStyle=i.fill,"right"===i.dir?(t.clearRect(i.x-i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x+i.speed,i.y,i.w,i.h),i.x+i.w>=e.width&&(i.dir="left")):(t.clearRect(i.x+i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x-i.speed,i.y,i.w,i.h),i.x<=0&&(i.dir="right")),t.fillStyle=l.fill,"right"===l.dir?(t.beginPath(),t.clearRect(l.x-l.speed,l.y-1,l.w+2,l.h+2),t.fillRect(l.x=l.x+l.speed,l.y,l.w,l.h),t.arc(75,75,50,0,2*Math.PI,!0),t.closePath(),l.x+l.w>=e.width&&(l.dir="left")):(t.clearRect(l.x+l.speed,l.y-1,l.w+2,l.h+2),t.fillRect(l.x=l.x-l.speed,l.y,l.w,l.h),l.x<=0&&(l.dir="right")),function(){if(Object.keys(n).length>0)for(let l in n)n[l].y<=e.height?(t.fillStyle=n[l].fill,t.save(),t.clearRect(n[l].x-1,n[l].y-n[l].speed,n[l].w+2,n[l].h+2),t.fillRect(n[l].x,n[l].y=n[l].y+n[l].speed,n[l].w,n[l].h),t.restore(),i.x<n[l].x+n[l].w&&n[l].x>i.x&&n[l].x<i.x+i.w&&i.y<n[l].y+n[l].h&&i.y+i.h>n[l].y&&(d=!0,cancelAnimationFrame(c),clearInterval(a))):(h+=10,document.getElementById("scoreP1").innerHTML="Player 1: "+h,delete n[l])}(),!1===d&&(c=window.requestAnimationFrame(o.bind(c)))}return{changeDirection:function(){switch(event.key){case"ArrowLeft":l.dir="left";break;case"ArrowRight":l.dir="right";break;case"ArrowUp":case"ArrowDown":break;case"a":i.dir="left";break;case"d":i.dir="right"}},init:function(){e.height=600,e.width=800,document.getElementById("scoreP1").innerHTML="Player 1: "+h,document.getElementById("scoreP2").innerHTML="Player 2: 0",function(){a=setInterval(()=>{for(var e="",t="abcdefghijklmnopqrstuvwxyz",i=0;i<10;i++)e+=t.charAt(Math.floor(Math.random()*t.length));n[e]={x:Math.floor(Math.random()*this.canvas.width),y:r.y,h:r.h,w:r.w,fill:r.fill,speed:5}},400)}(),o()}}}();game.init(),window.addEventListener("keydown",function(e){e.key;game.changeDirection(),console.log(e.key)});