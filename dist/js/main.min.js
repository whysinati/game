var game=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),n={x:0,y:475,h:25,w:25,fill:"#fff",dir:"right",speed:5},i={x:775,y:475,h:25,w:25,fill:"pink",dir:"left",speed:5},r={x:50,y:0,h:10,w:10,fill:"#ff0",speed:5},l={},d=null,a=null,c=!1,h=!1,o=!1,y=0,s=0;function f(){!1===c&&(t.fillStyle=n.fill,"right"===n.dir?(t.clearRect(n.x-n.speed,n.y-1,n.w+2,n.h+2),t.fillRect(n.x=n.x+n.speed,n.y,n.w,n.h),n.x+n.w>=e.width&&(n.dir="left")):(t.clearRect(n.x+n.speed,n.y-1,n.w+2,n.h+2),t.fillRect(n.x=n.x-n.speed,n.y,n.w,n.h),n.x<=0&&(n.dir="right"))),!1===h&&(t.fillStyle=i.fill,"right"===i.dir?(t.beginPath(),t.clearRect(i.x-i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x+i.speed,i.y,i.w,i.h),t.arc(75,75,50,0,2*Math.PI,!0),t.closePath(),i.x+i.w>=e.width&&(i.dir="left")):(t.clearRect(i.x+i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x-i.speed,i.y,i.w,i.h),i.x<=0&&(i.dir="right"))),function(){if(Object.keys(l).length>0)for(let r in l)l[r].y<=e.height?(t.fillStyle=l[r].fill,t.save(),t.clearRect(l[r].x-1,l[r].y-l[r].speed,l[r].w+2,l[r].h+2),t.fillRect(l[r].x,l[r].y=l[r].y+l[r].speed,l[r].w,l[r].h),t.restore(),n.x<l[r].x+l[r].w&&l[r].x>n.x&&l[r].x<n.x+n.w&&n.y<l[r].y+l[r].h&&n.y+n.h>l[r].y&&0==c&&(c=!0,document.getElementById("gameOverMsg").innerHTML="Player 1, GAME OVER!",setTimeout(function(){document.getElementById("gameOverMsg").innerHTML=""},1e3)),i.x<l[r].x+l[r].w&&l[r].x>i.x&&l[r].x<i.x+i.w&&i.y<l[r].y+l[r].h&&i.y+i.h>l[r].y&&0==h&&(h=!0,document.getElementById("gameOverMsg").innerHTML="Player 2, GAME OVER!",setTimeout(function(){document.getElementById("gameOverMsg").innerHTML=""},1e3)),!0===c&&!0===h&&(document.getElementById("gameOverMsg").innerHTML="GAME OVER!",cancelAnimationFrame(a),clearInterval(d))):(!1===c&&(y+=10),!1===h&&(s+=10),document.getElementById("scoreP1").innerHTML="Player 1: "+y,document.getElementById("scoreP2").innerHTML="Player 2: "+s,delete l[r])}(),!1===o&&(a=window.requestAnimationFrame(f.bind(a)))}return{changeDirection:function(){switch(event.key){case"ArrowLeft":i.dir="left";break;case"ArrowRight":i.dir="right";break;case"ArrowUp":case"ArrowDown":break;case"a":n.dir="left";break;case"d":n.dir="right"}},init:function(){e.height=600,e.width=800,document.getElementById("scoreP1").innerHTML="Player 1: "+y,document.getElementById("scoreP2").innerHTML="Player 2: "+s,function(){d=setInterval(()=>{for(var e="",t="abcdefghijklmnopqrstuvwxyz",n=0;n<10;n++)e+=t.charAt(Math.floor(Math.random()*t.length));l[e]={x:Math.floor(Math.random()*this.canvas.width),y:r.y,h:r.h,w:r.w,fill:r.fill,speed:5}},400)}(),f()}}}();game.init(),window.addEventListener("keydown",function(e){e.key;game.changeDirection()});